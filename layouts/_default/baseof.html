<!DOCTYPE html>
<html
  dir="{{ .Site.Language.LanguageDirection | default "ltr" }}"
  lang="{{- site.Language.Lang -}}"
  data-theme="{{- .Site.Params.displayMode -}}"
  class="html"
>
  {{- partial "head.html" . -}}
  <body
    {{ if eq .Site.Params.displayMode "dark" }}
      class="body theme--dark"

    {{ else }}
      class="body theme--light"

    {{ end }}
  >
    <div class="wrapper">
      <aside
        {{ if and (not .IsHome) (eq .Site.Params.hidesidebar true) }}
          class="wrapper__sidebar wrapper__sidebar--hidden"

        {{ else }}
          class="wrapper__sidebar"

        {{ end }}
      >
        {{- partial "sidebar.html" . -}}
      </aside>
      <main
        {{ if and (not .IsHome) (eq .Site.Params.hidesidebar true) }}
          class="wrapper__main wrapper__main--fullscreen"

        {{ else }}
          class="wrapper__main"

        {{ end }}
      >
        <header class="header">{{ partial "navbar.html" . }}</header>
        
        {{- block "main" . }}{{- end }}
      </main>
    </div>

    {{- partial "footer.html" (dict "context" . "footerClassModifier" "base") -}}

    {{- if (eq .Site.Params.simpleAnalytics.enable true) -}}
      {{- partial "analytics/simpleanalytics.html" . -}}


    {{- end -}}
  </body>
  <script>
    const tags = document.getElementById('tags');
    const tagBtn = document.getElementsByClassName('tag__btn')[0];

    window.addEventListener('resize', function() {
      let height = window.innerWidth >= 961 ? 15 : 40;
      
      if (window.innerWidth >= 961 && tags.scrollHeight <= 80) {        // 브라우저 해상도
        tagBtn.style.display = "none";
      } 
      else if (window.innerWidth <= 961 && tags.scrollHeight <= 32) {   // 모바일 해상도
        tagBtn.style.display = "none";
      }
      else {
        tagBtn.style.display = "flex";  
      }
    });

    const openTagList = function (el) {
      let height = window.innerWidth >= 961 ? 15 : 40;
    
      if (document.querySelector('.tags').classList.contains('hide')) {
        tags.style.maxHeight = tags.scrollHeight + "px";
        el.innerHTML = "태그 접기";
      }
      else {
        tags.style.maxHeight = height + "px";
        el.innerHTML = "태그 펼치기";
      }
      document.querySelector('.tags').classList.toggle('hide');
    }
    
  </script>
</html>
